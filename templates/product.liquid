{%- comment -%}
  Product page template
{%- endcomment -%}

<div class="page-width">
  <div class="grid product-single">
    <div class="grid__item medium-up--one-half">
      {%- if product.media.size > 0 -%}
        <div class="product-single__media-group">
          {%- for media in product.media -%}
            <div class="product-single__media" data-media-id="{{ media.id }}">
              {%- case media.media_type -%}
                {%- when 'image' -%}
                  <img src="{{ media | image_url: width: 600 }}" alt="{{ media.alt | escape }}">
                {%- when 'external_video' -%}
                  {{ media | external_video_tag }}
                {%- when 'video' -%}
                  {{ media | video_tag: controls: true }}
                {%- when 'model' -%}
                  {{ media | model_viewer_tag }}
              {%- endcase -%}
            </div>
          {%- endfor -%}
        </div>
      {%- endif -%}
    </div>

    <div class="grid__item medium-up--one-half">
      <div class="product-single__meta">
        <h1 class="product-single__title">{{ product.title }}</h1>
        
        <div class="product-single__price">
          {%- if product.compare_at_price > product.price -%}
            <span class="visually-hidden">{{ 'products.product.regular_price' | t }}</span>
            <s class="product-single__price--regular">{{ product.compare_at_price | money }}</s>
            <span class="visually-hidden">{{ 'products.product.sale_price' | t }}</span>
            <span class="product-single__price--sale">{{ product.price | money }}</span>
          {%- else -%}
            <span class="product-single__price--regular">{{ product.price | money }}</span>
          {%- endif -%}
        </div>

        {%- if product.description != blank -%}
          <div class="product-single__description rte">
            {{ product.description }}
          </div>
        {%- endif -%}

        {%- unless product.has_only_default_variant -%}
          <variant-selects class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" {{ block.shopify_attributes }}>
            {%- for option in product.options_with_values -%}
              <div class="product-form__input">
                <label class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}">
                  {{ option.name }}
                </label>
                <div class="select">
                  <select id="Option-{{ section.id }}-{{ forloop.index0 }}"
                    class="select__select"
                    name="options[{{ option.name | escape }}]"
                    form="{{ product_form_id }}"
                  >
                    {% for value in option.values %}
                      <option value="{{ value | escape }}"
                        {% if option.selected_value == value %}selected="selected"{% endif %}
                      >
                        {{ value }}
                      </option>
                    {% endfor %}
                  </select>
                  {% render 'icon-caret' %}
                </div>
              </div>
            {%- endfor -%}
          </variant-selects>
        {%- endunless -%}

        <product-form class="product-form">
          {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
            <div class="product-form__buttons">
              <button
                type="submit"
                name="add"
                class="product-form__submit button button--full-width"
                {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
              >
                <span>
                  {%- if product.selected_or_first_available_variant.available -%}
                    {{ 'products.product.add_to_cart' | t }}
                  {%- else -%}
                    {{ 'products.product.sold_out' | t }}
                  {%- endif -%}
                </span>
              </button>
            </div>
          {%- endform -%}
        </product-form>
      </div>
    </div>
  </div>
</div>
